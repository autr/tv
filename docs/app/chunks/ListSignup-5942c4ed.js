import{S as e,i as s,s as t,l as n,f as i,F as a,d as l,z as r,e as o,k as c,c as d,a as u,n as p,b as m,H as f,D as h,E as b,I as g,t as y,g as $,a0 as k,h as v,J as w,R as z,U as x,j as _,m as E,o as T,v as L,r as N,w as U,A as I,p as O,q as M}from"./vendor-07a24748.js";import{o as P}from"./fetcheriser-b1b69b5f.js";const j=(e,s,t)=>`${e}/api/${s}/${t}`;function D(e,s,t){const n=e.slice();return n[29]=s[t],n[30]=s,n[31]=t,n}function H(e){let s,t,n,a,r,_,E,T,L,N,U,I,O,M,P,j,H,A,B,F,J=e[4]?"update":"subscribe",V=(e[6]||"")+"",q=(e[8]||"")+"",C=e[12],G=[];for(let i=0;i<C.length;i+=1)G[i]=R(D(e,C,i));let K=e[4]&&S(e);return{c(){s=o("form"),n=c(),a=o("input"),r=c(),_=o("input"),T=c();for(let e=0;e<G.length;e+=1)G[e].c();L=c(),N=o("button"),U=y(J),I=c(),K&&K.c(),O=c(),M=o("div"),P=y(V),j=c(),this.h()},l(e){s=d(e,"FORM",{action:!0,class:!0,style:!0});var t=u(s);n=p(t),a=d(t,"INPUT",{disabled:!0,id:!0,placeholder:!0,name:!0,type:!0,class:!0}),r=p(t),_=d(t,"INPUT",{disabled:!0,id:!0,placeholder:!0,name:!0,type:!0,class:!0}),T=p(t);for(let s=0;s<G.length;s+=1)G[s].l(t);L=p(t),N=d(t,"BUTTON",{class:!0,disabled:!0});var i=u(N);U=$(i,J),i.forEach(l),I=p(t),K&&K.l(t),O=p(t),M=d(t,"DIV",{style:!0,class:!0});var o=u(M);P=$(o,V),o.forEach(l),j=p(t),t.forEach(l),this.h()},h(){t=new x(n),a.disabled=e[7],m(a,"id","name"),m(a,"placeholder","name"),m(a,"name","name"),m(a,"type","text"),m(a,"class","ezipe-field-name"),h(a,"none",e[8]||e[4]),_.disabled=E=e[7]||e[4],m(_,"id","address"),m(_,"placeholder","email"),m(_,"name","address"),m(_,"type","text"),m(_,"class","ezipe-field-address"),h(_,"none",e[8]),m(N,"class","ezipe-button ezipe-button-submit filled"),N.disabled=e[7],h(N,"none",e[8]),f(M,"margin-bottom","0",1),m(M,"class","ezipe-error error"),h(M,"hidden",!e[6]),h(M,"none",e[8]),H=new x(null),m(s,"action",e[10]),m(s,"class",A="ezipe-mailing-list "+e[2]),m(s,"style",e[3])},m(l,o){i(l,s,o),t.m(e[11],s),b(s,n),b(s,a),k(a,e[0]),b(s,r),b(s,_),k(_,e[1]),b(s,T);for(let e=0;e<G.length;e+=1)G[e].m(s,null);b(s,L),b(s,N),b(N,U),b(s,I),K&&K.m(s,null),b(s,O),b(s,M),b(M,P),b(s,j),H.m(q,s),B||(F=[g(a,"input",e[23]),g(_,"input",e[24]),g(s,"submit",e[13])],B=!0)},p(e,n){if(2048&n[0]&&t.p(e[11]),128&n[0]&&(a.disabled=e[7]),1&n[0]&&a.value!==e[0]&&k(a,e[0]),272&n[0]&&h(a,"none",e[8]||e[4]),144&n[0]&&E!==(E=e[7]||e[4])&&(_.disabled=E),2&n[0]&&_.value!==e[1]&&k(_,e[1]),256&n[0]&&h(_,"none",e[8]),4512&n[0]){let t;for(C=e[12],t=0;t<C.length;t+=1){const i=D(e,C,t);G[t]?G[t].p(i,n):(G[t]=R(i),G[t].c(),G[t].m(s,L))}for(;t<G.length;t+=1)G[t].d(1);G.length=C.length}16&n[0]&&J!==(J=e[4]?"update":"subscribe")&&v(U,J),128&n[0]&&(N.disabled=e[7]),256&n[0]&&h(N,"none",e[8]),e[4]?K?K.p(e,n):(K=S(e),K.c(),K.m(s,O)):K&&(K.d(1),K=null),64&n[0]&&V!==(V=(e[6]||"")+"")&&v(P,V),64&n[0]&&h(M,"hidden",!e[6]),256&n[0]&&h(M,"none",e[8]),256&n[0]&&q!==(q=(e[8]||"")+"")&&H.p(q),1024&n[0]&&m(s,"action",e[10]),4&n[0]&&A!==(A="ezipe-mailing-list "+e[2])&&m(s,"class",A),8&n[0]&&m(s,"style",e[3])},d(e){e&&l(s),w(G,e),K&&K.d(),B=!1,z(F)}}}function A(e){let s;return{c(){s=o("div"),this.h()},l(e){s=d(e,"DIV",{class:!0}),u(s).forEach(l),this.h()},h(){m(s,"class","ezipe-error ezipe-invalid")},m(t,n){i(t,s,n),s.innerHTML=e[9]},p(e,t){512&t[0]&&(s.innerHTML=e[9])},d(e){e&&l(s)}}}function R(e){let s,t,n,a,r,y,$,k,v,w,z,_=e[29].key+"",E=e[29].text+"";function T(){e[25].call(t,e[29])}return{c(){s=o("label"),t=o("input"),n=c(),a=o("span"),r=c(),$=c(),k=o("em"),this.h()},l(e){s=d(e,"LABEL",{style:!0,class:!0});var i=u(s);t=d(i,"INPUT",{disabled:!0,type:!0}),n=p(i),a=d(i,"SPAN",{}),u(a).forEach(l),r=p(i),$=p(i),k=d(i,"EM",{class:!0}),u(k).forEach(l),i.forEach(l),this.h()},h(){t.disabled=e[7],m(t,"type","checkbox"),y=new x($),m(k,"class","fade ml0-6"),f(s,"user-select","none"),m(s,"class",v="ezipe-field-label ezipe-field-"+e[29].key+" checkbox pointer user-select-none"),h(s,"none",e[8]),h(s,"disabled",e[7])},m(l,o){i(l,s,o),b(s,t),t.checked=e[5][e[29].key],b(s,n),b(s,a),b(s,r),y.m(_,s),b(s,$),b(s,k),k.innerHTML=E,w||(z=g(t,"change",T),w=!0)},p(n,i){e=n,128&i[0]&&(t.disabled=e[7]),4128&i[0]&&(t.checked=e[5][e[29].key]),4096&i[0]&&_!==(_=e[29].key+"")&&y.p(_),4096&i[0]&&E!==(E=e[29].text+"")&&(k.innerHTML=E),4096&i[0]&&v!==(v="ezipe-field-label ezipe-field-"+e[29].key+" checkbox pointer user-select-none")&&m(s,"class",v),4352&i[0]&&h(s,"none",e[8]),4224&i[0]&&h(s,"disabled",e[7])},d(e){e&&l(s),w=!1,z()}}}function S(e){let s,t,n,r;return{c(){s=o("button"),t=y("unsubscribe"),this.h()},l(e){s=d(e,"BUTTON",{class:!0});var n=u(s);t=$(n,"unsubscribe"),n.forEach(l),this.h()},h(){m(s,"class","ezipe-button ezipe-button-unsubscribe")},m(a,l){i(a,s,l),b(s,t),n||(r=g(s,"click",e[14]),n=!0)},p:a,d(e){e&&l(s),n=!1,r()}}}function B(e){let s;function t(e,s){return e[9]?A:H}let r=t(e),o=r(e);return{c(){o.c(),s=n()},l(e){o.l(e),s=n()},m(e,t){o.m(e,t),i(e,s,t)},p(e,n){r===(r=t(e))&&o?o.p(e,n):(o.d(1),o=r(e),o&&(o.c(),o.m(s.parentNode,s)))},i:a,o:a,d(e){o.d(e),e&&l(s)}}}function F(e){return e.slice(e.indexOf("?")+1).split("&").reduce(((e,s)=>{let[t,n]=s.split("="),i=!!n&&decodeURIComponent(n);return Object.assign(e,{[t]:i})}),{})}function J(e){return"string"!=typeof e?e:e.split(",").filter((e=>""!=e)).map((e=>({key:e.split(":")[0],text:e.split(":")[1]})))}function V(e,s,t){let n,i,a,l;const o="undefined"!=typeof window&&void 0!==window.document;let c,d,u,p,{interests:m=[]}=s,{name:f=""}=s,{address:h=""}=s,{root:b=null}=s,{user:g=null}=s,{css:y=""}=s,{message:$="Success"}=s,{link:k="/"}=s,{button:v="return"}=s,{class_:w=""}=s,{style_:z=""}=s,{init:x=""}=s,_={},{editor:E=!1}=s;return r((async e=>{console.log(`[list-signup] ✨  mounted with ${b} ${g} ${JSON.stringify(_)}`)})),e.$$set=e=>{"interests"in e&&t(15,m=e.interests),"name"in e&&t(0,f=e.name),"address"in e&&t(1,h=e.address),"root"in e&&t(16,b=e.root),"user"in e&&t(17,g=e.user),"css"in e&&t(18,y=e.css),"message"in e&&t(19,$=e.message),"link"in e&&t(20,k=e.link),"button"in e&&t(21,v=e.button),"class_"in e&&t(2,w=e.class_),"style_"in e&&t(3,z=e.style_),"init"in e&&t(22,x=e.init),"editor"in e&&t(4,E=e.editor)},e.$$.update=()=>{32784&e.$$.dirty[0]&&function(e,s){let n=o?window.location.search:"";n=""!=n&&o?F(n):x;const i=F(n);t(1,h=i.address),""==h&&t(1,h=null);const a=J(s||"");(i.vars||"").split(",").forEach((e=>{a.find((s=>s.key==e))&&t(5,_[e]=!0,_)})),E&&(h&&0!=Object.keys(_).length||t(9,p=`\n                <div class="ezipe-success ezipe-message">Address and vars must be set in URL search params, ie:</div>\n                <div class="ezipe-success ezipe-details monospace mt2">?address=${h||"foo@bar.com"}&news=annoucements&code=opensource</div>\n            `))}(0,m),3670019&e.$$.dirty[0]&&(n=`\n        <div>${$}</div>\n        <div class="monospace mb2">${f} &lt;${h}&gt;</div>\n        <a class="filled button text-center" href="${k}">${v}</a>\n    `),196608&e.$$.dirty[0]&&t(10,i=j(b,g,"signup_mailing_list")),262144&e.$$.dirty[0]&&t(11,a=`\n        <style>\n            @import "${y}";\n        </style>\n    `),32768&e.$$.dirty[0]&&t(12,l="string"==typeof m?J(m):m)},[f,h,w,z,E,_,c,d,u,p,i,a,l,async function(e){console.log("[list-signup] 🌐  submitting",{name:f,address:h,vars:_}),t(6,c=null),t(7,d=!0),e.preventDefault(),e.stopPropagation();const s=await P.post(e.target.action,{name:f,address:h,vars:_});console.log(s),s.ok&&t(8,u=n),s.ok||t(6,c=s.message),t(7,d=!1)},async function(e){t(6,c=null),t(7,d=!0),e.preventDefault(),e.stopPropagation();const s=await P.post(j(b,g,"unsubscribe_mailing_list"),{name:f,address:h,vars:_});s.ok&&t(8,u=n),s.ok||t(6,c=s.message),t(7,d=!1)},m,b,g,y,$,k,v,x,function(){f=this.value,t(0,f)},function(){h=this.value,t(1,h)},function(e){_[e.key]=this.checked,t(5,_),t(12,l),t(15,m)}]}class q extends e{constructor(e){super(),s(this,e,V,B,t,{interests:15,name:0,address:1,root:16,user:17,css:18,message:19,link:20,button:21,class_:2,style_:3,init:22,editor:4},[-1,-1])}}function C(e){let s,t;return s=new q({props:{interests:e[0],root:e[1],user:e[2],css:e[3],message:e[4],link:e[5],button:e[6],style_:e[9],class_:e[8],init:e[7],editor:!1}}),{c(){_(s.$$.fragment)},l(e){E(s.$$.fragment,e)},m(e,n){T(s,e,n),t=!0},p(e,[t]){const n={};1&t&&(n.interests=e[0]),2&t&&(n.root=e[1]),4&t&&(n.user=e[2]),8&t&&(n.css=e[3]),16&t&&(n.message=e[4]),32&t&&(n.link=e[5]),64&t&&(n.button=e[6]),512&t&&(n.style_=e[9]),256&t&&(n.class_=e[8]),128&t&&(n.init=e[7]),s.$set(n)},i(e){t||(L(s.$$.fragment,e),t=!0)},o(e){N(s.$$.fragment,e),t=!1},d(e){U(s,e)}}}function G(e,s,t){let{interests:n=[]}=s,{root:i=null}=s,{user:a=null}=s,{css:l=""}=s,{message:r="Thank you, you have been subscribed as:"}=s,{link:o="/"}=s,{button:c="return"}=s,{init:d=""}=s,{class:u=""}=s,{style:p=""}=s;return e.$$set=e=>{"interests"in e&&t(0,n=e.interests),"root"in e&&t(1,i=e.root),"user"in e&&t(2,a=e.user),"css"in e&&t(3,l=e.css),"message"in e&&t(4,r=e.message),"link"in e&&t(5,o=e.link),"button"in e&&t(6,c=e.button),"init"in e&&t(7,d=e.init),"class"in e&&t(8,u=e.class),"style"in e&&t(9,p=e.style)},[n,i,a,l,r,o,c,d,u,p]}class K extends e{constructor(e){super(),s(this,e,G,C,t,{interests:0,root:1,user:2,css:3,message:4,link:5,button:6,init:7,class:8,style:9})}}function Q(e){let s,t;const n=[e[0],{class:"flex column cmb1 sm-max-100 minw18em"}];let i={};for(let a=0;a<n.length;a+=1)i=I(i,n[a]);return s=new K({props:i}),{c(){_(s.$$.fragment)},l(e){E(s.$$.fragment,e)},m(e,n){T(s,e,n),t=!0},p(e,[t]){const i=1&t?O(n,[M(e[0]),n[1]]):{};s.$set(i)},i(e){t||(L(s.$$.fragment,e),t=!0)},o(e){N(s.$$.fragment,e),t=!1},d(e){U(s,e)}}}function W(e){return[{root:"https://api.autr.tv",user:"autr",interests:"artworks:news,code:open source,personal:miscelleny",init:"vars=artworks,code,personal"}]}class X extends e{constructor(e){super(),s(this,e,W,Q,t,{})}}export{X as L};
